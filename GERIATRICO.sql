
CREATE TABLE RESIDENTES(
    DNI_RESIDENTE               VARCHAR2(9),
    NOMBRE                      VARCHAR2(100),
    APELLIDOS                   VARCHAR2(100),
    TELEFONO_CONTACTO           VARCHAR2(13),
    FECHA_NACIMIENTO            DATE,
    ACTIVO                      NUMBER(1)DEFAULT 1,
    CONSTRAINT PK_RESIDENTES PRIMARY KEY (DNI_RESIDENTE),
    CONSTRAINT NN_RESIDENTES_NOMBRE CHECK (NOMBRE IS NOT NULL),
    CONSTRAINT NN_RESIDENTES_APELLIDOS CHECK (APELLIDOS IS NOT NULL),
    CONSTRAINT NN_RESIDENTES_TELEFONO_CONTA CHECK (TELEFONO_CONTACTO IS NOT NULL),
    CONSTRAINT NN_RESIDENTES_ACTIVO CHECK (ACTIVO IS NOT NULL)
);

CREATE TABLE ESTANCIA(
    HABITACION                  NUMBER(2),
    FECHA_ENTRADA               DATE,
    FECHA_SALIDA                DATE,
    DNI_RESIDENTE               VARCHAR2(9),               
    COSTE_MENSUAL               NUMBER(8,2),
    CONSTRAINT PK_ESTANCIA PRIMARY KEY (HABITACION),
    CONSTRAINT NN_ESTANCIA_COSTE_MENSUAL CHECK (COSTE_MENSUAL IS NOT NULL),
    CONSTRAINT CK_ESTANCIA_COSTE_MENSUAL_POS CHECK (COSTE_MENSUAL >0)
);

ALTER TABLE COMIDAS_SEMANA
ADD CONSTRAINT FK_COMIDAS_SEMANA_RESIDENTES FOREIGN KEY (DNI_RESIDENTE) REFERENCES RESIDENTES(DNI_RESIDENTE)ON DELETE CASCADE;

ALTER TABLE ESTANCIA
ADD CONSTRAINT FK_CESTANCIA_RESIDENTES FOREIGN KEY (DNI_RESIDENTE) REFERENCES RESIDENTES(DNI_RESIDENTE) ON DELETE SET NULL;


CREATE SEQUENCE SECUENCIA_HABITACION
START WITH 1 INCREMENT BY 1;

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);


INSERT INTO RESIDENTES(DNI_RESIDENTE,NOMBRE,APELLIDOS,TELEFONO_CONTACTO,ACTIVO)
VALUES('11111111A','FERNANDO','CARRASCAL GALLEGO','+34658452348',1);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('37254274R', 'Annamaria', 'Petriello', '5878250003', 0);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('79138265A', 'Cass', 'Thumann', '6284667117', 0);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('44230713B', 'Almeda', 'Diggle', '9046946601', 0);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('14750544T', 'Burnard', 'Jardin', '6059737665', 1);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('06321722B', 'Maurie', 'Givens', '5798764774', 1);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('28483499T', 'Prince', 'Signorelli', '4796419249', 1);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('28024993E', 'Robbin', 'Tuxwell', '5452301070', 0);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('83938014C', 'Terencio', 'Dioniso', '3497439631', 0);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('92573364C', 'Daisy', 'Lugton', '6977329210', 1);
insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('96213923R', 'Quinn', 'Batchelder', '4854912139', 0);

UPDATE ESTANCIA
SET DNI_RESIDENTE = '11111111A'
WHERE HABITACION=1;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '96213923R'
WHERE HABITACION=2;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '92573364C'
WHERE HABITACION=3;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '83938014C'
WHERE HABITACION=4;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '28024993E'
WHERE HABITACION=5;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '28483499T'
WHERE HABITACION=6;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '06321722B'
WHERE HABITACION=7;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '14750544T'
WHERE HABITACION=8;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '44230713B'
WHERE HABITACION=9;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '79138265A'
WHERE HABITACION=10;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '37254274R'
WHERE HABITACION=11;


