CREATE TABLE RESIDENTES(
    DNI_RESIDENTE               VARCHAR2(9),
    NOMBRE                      VARCHAR2(100),
    APELLIDOS                   VARCHAR2(100),
    TELEFONO_CONTACTO           VARCHAR2(13),
    FECHA_NACIMIENTO            DATE,
    ACTIVO                      NUMBER(1)DEFAULT 1,
    CONSTRAINT PK_RESIDENTES PRIMARY KEY (DNI_RESIDENTE),
    CONSTRAINT NN_RESIDENTES_NOMBRE CHECK (NOMBRE IS NOT NULL),
    CONSTRAINT NN_RESIDENTES_APELLIDOS CHECK (APELLIDOS IS NOT NULL),
    CONSTRAINT NN_RESIDENTES_TELEFONO_CONTA CHECK (TELEFONO_CONTACTO IS NOT NULL),
    CONSTRAINT NN_RESIDENTES_ACTIVO CHECK (ACTIVO IS NOT NULL)
);
CREATE TABLE ESTANCIA(
    HABITACION                  NUMBER(2),
    FECHA_ENTRADA               DATE,
    FECHA_SALIDA                DATE,
    DNI_RESIDENTE               VARCHAR2(9),               
    COSTE_MENSUAL               NUMBER(8,2),
    CONSTRAINT PK_ESTANCIA PRIMARY KEY (HABITACION),
    CONSTRAINT NN_ESTANCIA_COSTE_MENSUAL CHECK (COSTE_MENSUAL IS NOT NULL),
    CONSTRAINT CK_ESTANCIA_COSTE_MENSUAL_POS CHECK (COSTE_MENSUAL >0)
);
CREATE TABLE MEDICAMENTO (
    ID_MEDICAMENTO                  NUMBER(3),
    NOMBRE                          VARCHAR(100),
    
    CONSTRAINT PK_ID_MEDICAMENTO PRIMARY KEY (ID_MEDICAMENTO),
    CONSTRAINT NN_NOMBRE CHECK (NOMBRE IS NOT NULL)
    );
CREATE TABLE TRATAMIENTO(
    ID_TRATAMIENTO                  NUMBER(3),
    ID_MEDICAMENTO                  NUMBER(3),
    FECHA_FIN                       DATE,
    FECHA_INICIO                    DATE,
    CANT_DESAYUNO                   NUMBER(2,2),
    CANT_COMIDA                     NUMBER(2,2),
    CANT_CENA                       NUMBER(2,2),
    
    CONSTRAINT PK_ID_TRATAMIENTO PRIMARY KEY (ID_TRATAMIENTO)
);

CREATE TABLE TOMAS(
    ID_TRATAMIENTO                  NUMBER(3),
    DNI_RESIDENTE                   VARCHAR2(9),
    
    CONSTRAINT PK_ID_TRATAMIENTO_DNI_RESIDENTE PRIMARY KEY (ID_TRATAMIENTO, DNI_RESIDENTE)
);

ALTER TABLE COMIDAS_SEMANA
ADD CONSTRAINT FK_COMIDAS_SEMANA_RESIDENTES FOREIGN KEY (DNI_RESIDENTE) REFERENCES RESIDENTES(DNI_RESIDENTE)ON DELETE CASCADE;

ALTER TABLE ESTANCIA
ADD CONSTRAINT FK_CESTANCIA_RESIDENTES FOREIGN KEY (DNI_RESIDENTE) REFERENCES RESIDENTES(DNI_RESIDENTE) ON DELETE SET NULL;

ALTER TABLE TRATAMIENTO
ADD CONSTRAINT FK_TRATAMIENTO_MEDICAMENTO_ FOREIGN KEY (ID_MEDICAMENTO) REFERENCES MEDICAMENTO(ID_MEDICAMENTO)
ON DELETE SET NULL;

ALTER TABLE TOMAS
ADD CONSTRAINT FK_TOMAS_TRATAMIENTO FOREIGN KEY (ID_TRATAMIENTO) REFERENCES TRATAMIENTO(ID_TRATAMIENTO)
ON DELETE SET NULL;

ALTER TABLE TOMAS
ADD CONSTRAINT FK_TOMAS_RESIDENTES FOREIGN KEY (DNI_RESIDENTE) REFERENCES RESIDENTES(DNI_RESIDENTE);


CREATE SEQUENCE ID_MEDICAMENTO
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE ID_TRATAMIENTO
START WITH 1
INCREMENT BY 1;

CREATE SEQUENCE SECUENCIA_HABITACION
START WITH 1 
INCREMENT BY 1;


--datos fernando
INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1000.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1200.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);

INSERT INTO ESTANCIA(HABITACION,COSTE_MENSUAL)
VALUES(SECUENCIA_HABITACION.NEXTVAL,1700.00);



INSERT INTO RESIDENTES(DNI_RESIDENTE,NOMBRE,APELLIDOS,TELEFONO_CONTACTO,ACTIVO)
VALUES('11111111A','FERNANDO','CARRASCAL GALLEGO','+34658452348',1);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('37254274R', 'Annamaria', 'Petriello', '5878250003', 0);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('79138265A', 'Cass', 'Thumann', '6284667117', 0);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('44230713B', 'Almeda', 'Diggle', '9046946601', 0);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('14750544T', 'Burnard', 'Jardin', '6059737665', 1);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('06321722B', 'Maurie', 'Givens', '5798764774', 1);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('28483499T', 'Prince', 'Signorelli', '4796419249', 1);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('28024993E', 'Robbin', 'Tuxwell', '5452301070', 0);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('83938014C', 'Terencio', 'Dioniso', '3497439631', 0);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('92573364C', 'Daisy', 'Lugton', '6977329210', 1);

insert into RESIDENTES (DNI_RESIDENTE, NOMBRE, APELLIDOS, TELEFONO_CONTACTO, ACTIVO) 
values ('96213923R', 'Quinn', 'Batchelder', '4854912139', 0);


UPDATE ESTANCIA
SET DNI_RESIDENTE = '11111111A'
WHERE HABITACION=1;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '96213923R'
WHERE HABITACION=2;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '92573364C'
WHERE HABITACION=3;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '83938014C'
WHERE HABITACION=4;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '28024993E'
WHERE HABITACION=5;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '28483499T'
WHERE HABITACION=6;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '06321722B'
WHERE HABITACION=7;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '14750544T'
WHERE HABITACION=8;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '44230713B'
WHERE HABITACION=9;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '79138265A'
WHERE HABITACION=10;

UPDATE ESTANCIA
SET DNI_RESIDENTE = '37254274R'
WHERE HABITACION=11;

--DATOS santi
INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL, 'SIMVASTATINA');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL, 'ASPIRINA');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'OMEOPRAZOL');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'LEXOTIROXINA');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'RAMIPRIL');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'PARACETAMOL');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'VENTOLIN');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'FLIXOTIDE');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'FORTASEC');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'SILDENAFILO');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'ALMAX');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'ATORVASTATINA');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'LANSOPRAZOL');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'PULMICOR');

INSERT INTO MEDICAMENTO(ID_MEDICAMENTO,NOMBRE)
VALUES (ID_MEDICAMENTO.NEXTVAL,'PRIMPERAN');

/*INSERT INTO TRATAMIENTO(ID_TRATAMIENTO,ID_MEDICAMENTO,FECHA_FIN,FECHA_INICIO,CANT_DESAYUNO,CANT_COMIDA,CANT_CENA)
VALUES (ID_TRATAMIENTO.NEXTVAL,aqui la lcave de unmedicamento,);

insert into TRATAMIENTO (ID_TRATAMIENTO, ID_MEDICAMENTO, FECHA_INICIO, FECHA_FIN, CANT_DESAYUNO, CANT_COMIDA, CANT_CENA) 
values (ID_TRATAMIENTO.NEXTVAL, aqui la lcave de unmedicamento,'23/07/2020', '18/01/2021', 1, 0.5, 2);*/








/*
DROP TABLE RESIDENTES;
DROP TABLE ESTANCIA;
DROP TABLE MEDICAMENTO;
DROP TABLE TOMAS;
DROP TABLE TRATAMIENTO;

DROP SEQUENCE ID_MEDICAMENTO;
DROP SEQUENCE ID_TRATAMIENTO;
DROP SEQUENCE SECUENCIA_HABITACION;





*/
--aCABA sANTI




























